{"version":3,"sources":["components/ScriptAppender.jsx","components/RaiselyFormEmbed.jsx","util/index.js","blocks/RaiselyDonationForm/edit.jsx","blocks/RaiselyDonationForm/icon.jsx","blocks/RaiselyDonationForm/block.json","blocks/RaiselyDonationForm/index.js","index.js"],"names":["ScriptAppender","condition","src","parent","onMount","id","existingScript","querySelector","script","document","createElement","addEventListener","appendChild","wp","element","useEffect","useState","useRef","useCallback","RaiselyFormEmbed","campaignPath","onIframeLoaded","scriptId","isIframeLoaded","formWrapper","setFormWrapper","formWrapperRef","current","clearInterval","onScriptMount","iframeLoadedInterval","setInterval","iframe","style","pointerEvents","onIframeLoad","timeout","Promise","resolve","reject","attachEvent","console","log","onload","setTimeout","i18n","__","_x","sprintf","apiFetch","blockEditor","BlockIcon","BlockControls","useBlockProps","InspectorControls","components","BaseControl","Button","SelectControl","PanelBody","Placeholder","Spinner","ToolbarButton","ToolbarGroup","DonationFormEdit","attributes","setAttributes","clientId","props","icon","metadata","title","loading","setLoading","error","setError","campaignsList","setCampaignsList","embedCampaignPath","setCampaignPath","iframeLoaded","setIframeLoaded","preview","setPreview","embedKey","setEmbedKey","isStillMounted","blockProps","window","raiselyBlocks","nonce","use","createNonceMiddleware","path","then","res","auth","data","settingsPage","catch","e","instructions","length","target","value","map","name","label","primitives","SVG","Path","logo","module","exports","settings","description","example","edit","registerBlockType","blocks","registerBlock","block","Object","assign","RaiselyDonationForm","forEach"],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["const ScriptAppender = ({ condition, src, parent, onMount, id }) => {\n  // Check condition\n  if (!condition) return null;\n\n  // Check if script already exists\n  const existingScript = parent.querySelector(`script[src=\"${src}\"]`);\n\n  if (!existingScript) {\n    const script = document.createElement('script');\n    script.id = id;\n    script.src = src;\n\n    if (!!onMount) {\n      script.addEventListener('load', () => onMount(script));\n    }\n\n    parent.appendChild(script);\n\n  }\n\n  return null;\n}\nexport default ScriptAppender;\n","import ScriptAppender from './ScriptAppender';\n\nconst { useEffect, useState, useRef, useCallback } = wp.element;\n\nconst RaiselyFormEmbed = ({ campaignPath, onIframeLoaded, scriptId }) => {\n  const isIframeLoaded = useRef(null);\n  const [formWrapper, setFormWrapper] = useState(null);\n  const formWrapperRef = useCallback(setFormWrapper, []);\n\n  useEffect(() => {\n    return () => {\n      if (isIframeLoaded.current) {\n        clearInterval(isIframeLoaded.current);\n      }\n    };\n  }, []);\n\n  const onScriptMount = () => {\n    const iframeLoadedInterval = setInterval(() => {\n      const iframe = formWrapper.querySelector('iframe');\n\n      if (!!iframe) {\n        iframe.style.pointerEvents = 'none';\n        onIframeLoaded()\n        clearInterval(isIframeLoaded.current);\n        isIframeLoaded.current = null;\n      }\n    }, 1000);\n    isIframeLoaded.current = iframeLoadedInterval;\n  };\n\n  return (\n    <div\n      id={'raisely-donate'}\n      data-campaign-path={campaignPath}\n      data-width='100%'\n      data-height='800'\n      ref={formWrapperRef}\n    >\n      <ScriptAppender\n        id={scriptId}\n        condition={!!formWrapper}\n        src='https://cdn.raisely.com/v3/public/embed.js'\n        parent={formWrapper}\n        onMount={onScriptMount}\n      />\n    </div>\n  );\n};\n\nexport default RaiselyFormEmbed;\n","export const onIframeLoad = (iframe, timeout) => {\n  return new Promise((resolve, reject) => {\n    // Set on load events\n    if (iframe.attachEvent) {\n      iframe.attachEvent(\"onload\", resolve);\n    } else {\n      console.log('setting on load')\n      iframe.onload = resolve\n    }\n\n    setTimeout(reject, timeout);\n  })\n}","import \"./styles.css\";\n\nimport RaiselyFormEmbed from '../../components/RaiselyFormEmbed'\nimport ScriptAppender from '../../components/ScriptAppender'\n/**\n * Internal dependencies\n */\nimport { metadata } from './index';\nimport { onIframeLoad } from \"../../util\";\n\n/**\n * WordPress dependencies\n */\nconst { __, _x, sprintf } = wp.i18n;\nconst { useEffect, useState, useRef, useCallback } = wp.element;\nconst apiFetch = wp.apiFetch;\nconst {\n  BlockIcon,\n  BlockControls,\n  useBlockProps,\n  InspectorControls\n} = wp.blockEditor;\nconst {\n  BaseControl,\n  Button,\n  SelectControl,\n  PanelBody,\n  Placeholder,\n  Spinner,\n  ToolbarButton,\n  ToolbarGroup,\n} = wp.components;\n\nexport default function DonationFormEdit({ attributes, setAttributes, clientId, ...props }) {\n  const { campaignPath } = attributes;\n  const { icon, title } = metadata;\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [campaignsList, setCampaignsList] = useState([]);\n  const [embedCampaignPath, setCampaignPath] = useState(campaignPath);\n  const [iframeLoaded, setIframeLoaded] = useState(false);\n  const [preview, setPreview] = useState(!!campaignPath);\n  const [embedKey, setEmbedKey] = useState(1);\n\n  const isIframeLoaded = useRef(null);\n  const isStillMounted = useRef();\n\n  const blockProps = useBlockProps();\n\n  useEffect(() => {\n    isStillMounted.current = true;\n\n    if (window.raiselyBlocks?.nonce) {\n      apiFetch.use(apiFetch.createNonceMiddleware(window.raiselyBlocks.nonce));\n    }\n\n    apiFetch({\n      path: `/raisely/v1/campaigns-list`,\n    }).then(res => {\n      if (isStillMounted.current) {\n        setLoading(false);\n        if (res.auth) {\n          setCampaignsList(res.data);\n        } else {\n          setError(\n            <span>{__('Setup your connection with Raisely on the', 'raisely')} <a href={window?.raiselyBlocks?.settingsPage} target=\"_blank\">{__('Raisely Settings page', 'raisely')}</a> {__('to retrieve a list of your Raisely campaigns.', 'raisely')}</span>\n          )\n        }\n      }\n    }).catch((e) => {\n      if (isStillMounted.current) {\n        console.error(e);\n        setCampaignsList([]);\n        setLoading(false);\n        setError(__(\"Oops... Something went wrong. Please try again later.\", 'raisely'))\n      }\n    });\n\n    return () => {\n      isStillMounted.current = false;\n      if (isIframeLoaded.current) {\n        clearInterval(isIframeLoaded.current);\n      }\n    };\n  }, []);\n\n  const instructions = !error ? __('Raisely Campaign you wish to embed', 'raisely') : '';\n\n  return (\n    <>\n      <div {...blockProps}>\n        <BlockControls>\n          <ToolbarGroup>\n            {preview && (\n              <ToolbarButton\n                className=\"components-toolbar__control\"\n                label={__('Edit URL', 'raisely')}\n                icon={'edit'}\n                onClick={() => setPreview(false)}\n              />\n            )}\n          </ToolbarGroup>\n        </BlockControls>\n        {!preview ? (\n          <Placeholder\n            icon={<BlockIcon icon={icon} showColors />}\n            label={sprintf(__(`%s Campaign`, 'raisely'), title)}\n            className=\"wp-block-embed\"\n            instructions={instructions}\n          >\n            {loading ? (\n              <Spinner />\n            ) : error ? (\n              <p>{error}</p>\n            ) : !campaignsList.length ? (\n              <p>{__('There are no campaigns to select from.', 'raisely')}</p>\n            ) : (\n              <form onSubmit={() => {\n                setAttributes({ campaignPath: embedCampaignPath })\n                setPreview(true);\n              }}>\n                <select\n                  className=\"raisely-placeholder__input\"\n                  value={campaignPath}\n                  onChange={e => setCampaignPath(e.target.value)}\n                >\n                  {campaignsList.map(({ path, name }) => (\n                    <option key={path} value={path}>{name}</option>\n                  ))}\n                </select>\n                <Button className=\"is-primary\" type=\"submit\">\n                  {_x('Embed', 'raisely')}\n                </Button>\n              </form>\n            )}\n          </Placeholder>\n        ) : (\n          <>\n            <InspectorControls>\n              <PanelBody\n                title={__('Campaign Options', 'raisely')}\n                initialOpen={true}\n              >\n                <BaseControl>\n                  <SelectControl\n                    className=\"raisely-placeholder__input\"\n                    label=\"Select a campaign\"\n                    value={campaignPath}\n                    onChange={value => {\n                      setAttributes({ campaignPath: value });\n                      setCampaignPath(value);\n                      setEmbedKey(embedKey + 1);\n                    }}\n                    options={campaignsList.map(({ path, name }) => ({ value: path, label: name }))}\n                  />\n                </BaseControl>\n              </PanelBody>\n            </InspectorControls>\n            {!iframeLoaded && (<Spinner />)}\n            <RaiselyFormEmbed\n              key={`${clientId}_raisely_embed_${embedKey}`}\n              scriptId={clientId}\n              campaignPath={campaignPath}\n              onIframeLoaded={() => setIframeLoaded(true)}\n            />\n          </>\n        )}\n      </div>\n    </>\n  )\n}","/**\n * WordPress dependencies\n */\nconst { SVG, Path } = wp.primitives;\n\nexport const logo = (\n  <SVG fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 152 152\">\n    <Path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M34.2 123.5l41.9-47.3 41.7 47.4a63.22 63.22 0 01-41.7 15.8c-16.1-.1-30.8-6.1-41.9-15.9zM76 12.7c34.9 0 63.3 28.4 63.3 63.3 0 14.4-4.8 27.6-12.9 38.3L76.1 57.1l-50.6 57.1c-8-10.6-12.8-23.8-12.8-38.2 0-34.9 28.4-63.3 63.3-63.3zM76 0C34.1 0 0 34.1 0 76s34.1 76 76 76 76-34.1 76-76S117.9 0 76 0z\" fill=\"#6138D8\" />\n  </SVG>\n)","module.exports = {\n\t\"apiVersion\": 2,\n\t\"name\": \"raisely/donation-form\",\n\t\"title\": \"Raisely Donation Form\",\n\t\"category\": \"embed\",\n\t\"keywords\": [ \"recent content\" ],\n\t\"textdomain\": \"default\",\n\t\"attributes\": {\n\t\t\"campaignPath\": {\n\t\t\t\"type\": \"string\"\n\t\t}\n\t},\n\t\"supports\": {\n\t\t\"align\": false,\n\t\t\"html\": false,\n    \"className\": false,\n\t\t\"multiple\": false\n\t}\n}\n;","/**\n * Internal dependencies\n */\nimport edit from './edit';\nimport { logo } from './icon';\nimport metadata from './block.json';\n\n/**\n * WordPress dependencies\n */\nconst { __ } = wp.i18n;\n\nconst { name } = metadata;\nexport { metadata, name };\n\nexport const settings = {\n  icon: logo,\n  description: __('Displays a Raisely campaign donation form.', 'raisely'),\n  example: {},\n  edit,\n};\n","import * as RaiselyDonationForm from './blocks/RaiselyDonationForm';\n\nconst { registerBlockType } = wp.blocks\n\n/**\n * Function to register an individual block.\n *\n * @param {Object} block The block to be registered.\n *\n */\nconst registerBlock = (block) => {\n\n  if (!block) {\n    return;\n  }\n  const { metadata, settings, name } = block;\n\n  registerBlockType(name, Object.assign(metadata, settings));\n};\n[RaiselyDonationForm].forEach(registerBlock);"]}